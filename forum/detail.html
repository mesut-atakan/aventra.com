<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Forum Detayı</title>
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital@1&display=swap" rel="stylesheet" />
</head>
<body>
    <header>
        <div class="navbar">
            <nav class="navigation hide" id="navigation">
                <span class="close-icon" id="close-icon" onclick="showIconBar()"><i class="fa fa-close"></i></span>
                <ul class="nav-list">
                    <li class="nav-item"><a href="../index.html">Anasayfa</a></li>
                    <li class="nav-item"><a href="forums.html">Forumlar</a></li>
                    <li class="nav-item"><a href="create.html">Yeni Forum Oluştur</a></li>
                </ul>
            </nav>
            <a class="bar-icon" id="iconBar" onclick="hideIconBar()"><i class="fa fa-bars"></i></a>
            <div class="brand">Aventra</div>
        </div>
    </header>

    <div class="container">
        <div class="subforum">
            <div class="subforum-title">
                <h1 id="forumTitle">Yükleniyor...</h1>
            </div>
            <div class="subforum-description">
                <div id="forumContent" class="content-box">Yükleniyor...</div>
            </div>
        </div>
    </div>

    <footer>
        <span>&copy; Aventra Ekibi | Tüm Hakları Saklıdır</span>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

        const firebaseConfig = {
        apiKey: "AIzaSyDFXXqR4Xze-NAfccFCnDzDL7e-xcZGL9s",
        authDomain: "aventra-forum.firebaseapp.com",
        projectId: "aventra-forum",
        storageBucket: "aventra-forum.appspot.com",
        messagingSenderId: "813714185971",
        appId: "1:813714185971:web:cff1c9d2903ce3d7122186",
        measurementId: "G-FYYR18WRCP"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const forumTitle = document.getElementById("forumTitle");
        const forumContent = document.getElementById("forumContent");

        const urlParams = new URLSearchParams(window.location.search);
        const forumId = urlParams.get("id");

        async function loadForum() {
        if (!forumId) return;
        const docRef = doc(db, "forums", forumId);
        const docSnap = await getDoc(docRef);
        if (docSnap.exists()) {
        const data = docSnap.data();
        forumTitle.innerText = data.title;
        forumContent.innerHTML = data.content;
        } else {
        forumTitle.innerText = "Forum bulunamadı";
        forumContent.innerHTML = "Belirtilen forum silinmiş olabilir.";
        }
        }

        loadForum();
    </script>
    <script src="../main.js"></script>
</body>
</html>
